{% ckan_extends %}
{% import 'macros/form.html' as form %}


{% block basic_fields_url %}
  {% set is_upload = (data.url_type == 'upload') %}
  {{ form.image_upload(data, errors, field_url='url', field_upload='upload', field_clear='clear_upload',
     is_upload_enabled=false, is_url=data.url and not is_upload, is_upload=is_upload,
     upload_label=_('Data'), url_label=_('URL'), placeholder=_('http://example.com/external-data.csv'), field_name='name') }}
{% endblock %}

{% block basic_fields_format %}
  {% set format_attrs = {'data-module-tags': '', 'data-module': 'autocomplete', 'data-module-source': '/api/2/util/resource/format_autocomplete?incomplete=?'} %}
  {% call form.input('format', id='field-format', label=_('Format'), placeholder=_('eg. CSV, XML or JSON'), value=data.format, error=errors.format, classes=['control-medium'], attrs=format_attrs) %}
  {% endcall %}
{% endblock %}